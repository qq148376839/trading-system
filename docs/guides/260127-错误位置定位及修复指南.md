# é”™è¯¯ä½ç½®å®šä½åŠä¿®å¤æŒ‡å—

åŸºäºæ—¥å¿—åˆ†æç»“æœï¼ˆ2026-01-27ï¼‰ï¼Œæœ¬æ–‡æ¡£å®šä½äº†æ‰€æœ‰å…³é”®é”™è¯¯åœ¨ä»£ç ä¸­çš„å…·ä½“ä½ç½®ï¼Œä¸ºåç»­ä¿®å¤æä¾›ç²¾ç¡®æŒ‡å¯¼ã€‚

---

## ğŸ“Š é”™è¯¯ç»Ÿè®¡æ¦‚è§ˆ

- **æ€»é”™è¯¯æ•°**: 3,737 (15.2%)
- **æ€»è­¦å‘Šæ•°**: 4,479 (18.2%)
- **æ€»æ—¥å¿—æ•°**: 24,630

---

## ğŸ”´ é«˜ä¼˜å…ˆçº§é”™è¯¯

### 1. æ•°æ®åº“è¡¨ç¼ºå¤±é”™è¯¯ (780æ¬¡)

#### é”™è¯¯ä¿¡æ¯
```
[ç­–ç•¥æ‰§è¡Œ] è®°å½•éªŒè¯å¤±è´¥æ—¥å¿—å¤±è´¥:
é”™è¯¯ç : 42P01 (relation does not exist)
```

#### ä»£ç ä½ç½®
**æ–‡ä»¶**: `api/src/services/strategy-scheduler.service.ts`
**è¡Œå·**: 1118

#### ä»£ç ç‰‡æ®µ
```typescript:api/src/services/strategy-scheduler.service.ts
// ç¬¬1100-1120è¡Œ
try {
  await pool.query(
    `INSERT INTO validation_failure_logs (
      strategy_id,
      symbol,
      failure_type,
      reason,
      timestamp
    ) VALUES ($1, $2, $3, $4, $5)`,
    [
      strategyId,
      symbol,
      'SHORT_VALIDATION_FAILED',
      error.message,
      new Date().toISOString(),
    ]
  );
} catch (dbError: unknown) {
  logger.error(`[ç­–ç•¥æ‰§è¡Œ] è®°å½•éªŒè¯å¤±è´¥æ—¥å¿—å¤±è´¥:`, dbError);  // â† ç¬¬1118è¡Œ
  // ä¸é˜»å¡ä¸»æµç¨‹ï¼Œåªè®°å½•é”™è¯¯
}
```

#### é—®é¢˜åˆ†æ
- **æ ¹æœ¬åŸå› **: æ•°æ®åº“è¡¨ `validation_failure_logs` ä¸å­˜åœ¨
- **å½±å“èŒƒå›´**: æ‰€æœ‰å–ç©ºéªŒè¯å¤±è´¥çš„æƒ…å†µéƒ½æ— æ³•è®°å½•åˆ°æ•°æ®åº“
- **è§¦å‘åœºæ™¯**:
  - å–ç©ºæƒé™æ£€æŸ¥å¤±è´¥æ—¶
  - ä¿è¯é‡‘è®¡ç®—å¤±è´¥æ—¶
  - å…¶ä»–å–ç©ºéªŒè¯å¤±è´¥æ—¶

#### ä¿®å¤æ–¹æ¡ˆ

##### æ–¹æ¡ˆ1: ä½¿ç”¨è¿ç§»è„šæœ¬åˆ›å»ºè¡¨ï¼ˆæ¨èï¼‰

**è¿ç§»æ–‡ä»¶å·²åˆ›å»º**: `api/migrations/011_create_validation_failure_logs.sql`

æ‰§è¡Œè¿ç§»ï¼š

```bash
# Windows PowerShell
$env:PGPASSWORD="your_password"
psql -U postgres -d trading_db -f api\migrations\011_create_validation_failure_logs.sql

# Linux/Mac
PGPASSWORD=your_password psql -U postgres -d trading_db -f api/migrations/011_create_validation_failure_logs.sql
```

æˆ–è€…ç›´æ¥è¿è¡ŒSQLï¼š

```sql
-- åˆ›å»ºéªŒè¯å¤±è´¥æ—¥å¿—è¡¨ï¼ˆè¯¦è§ api/migrations/011_create_validation_failure_logs.sqlï¼‰
BEGIN;

CREATE TABLE IF NOT EXISTS validation_failure_logs (
  id SERIAL PRIMARY KEY,
  strategy_id INTEGER NOT NULL,
  symbol VARCHAR(20) NOT NULL,
  failure_type VARCHAR(50) NOT NULL,
  reason TEXT,
  timestamp TIMESTAMP NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  CONSTRAINT fk_validation_logs_strategy
    FOREIGN KEY (strategy_id)
    REFERENCES strategies(id)
    ON DELETE CASCADE
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_validation_logs_strategy_id ON validation_failure_logs(strategy_id);
CREATE INDEX IF NOT EXISTS idx_validation_logs_symbol ON validation_failure_logs(symbol);
CREATE INDEX IF NOT EXISTS idx_validation_logs_timestamp ON validation_failure_logs(timestamp DESC);
CREATE INDEX IF NOT EXISTS idx_validation_logs_failure_type ON validation_failure_logs(failure_type);
CREATE INDEX IF NOT EXISTS idx_validation_logs_strategy_symbol ON validation_failure_logs(strategy_id, symbol, timestamp DESC);

-- æ·»åŠ è¡¨æ³¨é‡Š
COMMENT ON TABLE validation_failure_logs IS 'å–ç©ºéªŒè¯å¤±è´¥æ—¥å¿—è®°å½•è¡¨ - è®°å½•ç­–ç•¥æ‰§è¡Œè¿‡ç¨‹ä¸­å–ç©ºéªŒè¯å¤±è´¥çš„æƒ…å†µ';

COMMIT;
```

**éªŒè¯è¡¨åˆ›å»º**ï¼š

```sql
-- æ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨
SELECT table_name FROM information_schema.tables WHERE table_name = 'validation_failure_logs';

-- æŸ¥çœ‹è¡¨ç»“æ„
\d validation_failure_logs

-- æŸ¥çœ‹ç´¢å¼•
\di validation_failure_logs*

-- æµ‹è¯•æ’å…¥
INSERT INTO validation_failure_logs (strategy_id, symbol, failure_type, reason, timestamp)
VALUES (1, 'TEST.US', 'TEST', 'Test record', NOW());

-- æ¸…ç†æµ‹è¯•æ•°æ®
DELETE FROM validation_failure_logs WHERE failure_type = 'TEST';
```

##### æ–¹æ¡ˆ2: ç§»é™¤æ•°æ®åº“è®°å½•é€»è¾‘ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰
å¦‚æœæš‚æ—¶ä¸éœ€è¦æŒä¹…åŒ–è¿™äº›æ—¥å¿—ï¼Œå¯ä»¥æ³¨é‡Šæ‰æ•°æ®åº“æ’å…¥ä»£ç ï¼Œåªä¿ç•™æ—¥å¿—è®°å½•ã€‚

```typescript
// æ³¨é‡Šæ‰æ•°æ®åº“æ’å…¥
// try {
//   await pool.query(...);
// } catch (dbError: unknown) {
//   logger.error(`[ç­–ç•¥æ‰§è¡Œ] è®°å½•éªŒè¯å¤±è´¥æ—¥å¿—å¤±è´¥:`, dbError);
// }
```

#### å»ºè®®
**å¼ºçƒˆæ¨èæ–¹æ¡ˆ1**ï¼Œå› ä¸ºéªŒè¯å¤±è´¥æ—¥å¿—å¯¹äºæ’æŸ¥é—®é¢˜å’Œä¼˜åŒ–ç­–ç•¥éå¸¸é‡è¦ã€‚

---

### 2. APIè¯·æ±‚é™æµé”™è¯¯ (1,088æ¬¡)

#### é”™è¯¯ä¿¡æ¯
```
openapi error: code=429002: api request is limited, please slow down request frequency
```

#### ä»£ç ä½ç½®

##### 2.1 ç­–ç•¥è°ƒåº¦å™¨ä¸­çš„APIè°ƒç”¨
**æ–‡ä»¶**: `api/src/services/strategy-scheduler.service.ts`
**æ¶‰åŠè¡Œ**: å¤šå¤„APIè°ƒç”¨

ä¸»è¦è§¦å‘ç‚¹ï¼š
1. **è®¢å•ä»·æ ¼æ›´æ–°** (çº¦ç¬¬800-860è¡Œ)
2. **æŒä»“æŸ¥è¯¢** (çº¦ç¬¬400-500è¡Œ)
3. **å–ç©ºæƒé™æ£€æŸ¥** (é€šè¿‡ shortValidationService)

##### 2.2 å–ç©ºéªŒè¯æœåŠ¡ä¸­çš„APIè°ƒç”¨
**æ–‡ä»¶**: `api/src/services/short-position-validation.service.ts`

æ¶‰åŠçš„APIè°ƒç”¨ï¼š
- `tradeClient.marginRatio()` - ä¿è¯é‡‘æ¯”ä¾‹æŸ¥è¯¢
- `tradeClient.stockPositions()` - æŒä»“æŸ¥è¯¢
- å…¶ä»–äº¤æ˜“ç›¸å…³API

#### é—®é¢˜åˆ†æ
- **æ ¹æœ¬åŸå› **: è¯·æ±‚é¢‘ç‡è¶…è¿‡LongPort APIé™åˆ¶ï¼ˆ429é”™è¯¯ï¼‰
- **å½±å“æ¨¡å—**:
  - Strategy.Scheduler: 864æ¬¡
  - Service.Short.Position.Validation.Service: 224æ¬¡
- **è§¦å‘åœºæ™¯**:
  - ç­–ç•¥å®šæ—¶æ‰§è¡Œæ—¶æ‰¹é‡æŸ¥è¯¢å¤šä¸ªæ ‡çš„
  - è®¢å•ç›‘æ§é¢‘ç¹æ›´æ–°ä»·æ ¼
  - å–ç©ºéªŒè¯æ—¶å¹¶å‘æŸ¥è¯¢å¤šä¸ªæ ‡çš„çš„ä¿è¯é‡‘

#### ä¿®å¤æ–¹æ¡ˆ

##### æ–¹æ¡ˆ1: å®ç°è¯·æ±‚é€Ÿç‡é™åˆ¶å™¨ï¼ˆæ¨èï¼‰

åˆ›å»ºæ–°æ–‡ä»¶ `api/src/utils/rate-limiter.ts`:

```typescript
/**
 * APIè¯·æ±‚é€Ÿç‡é™åˆ¶å™¨
 * é˜²æ­¢è¶…è¿‡APIé™æµé˜ˆå€¼
 */
export class RateLimiter {
  private queue: Array<{ fn: () => Promise<any>; resolve: Function; reject: Function }> = [];
  private processing = false;
  private lastRequestTime = 0;
  private minInterval: number; // æœ€å°è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰
  private requestCount = 0;
  private windowStart = Date.now();
  private readonly windowSize = 60000; // 1åˆ†é’Ÿçª—å£
  private readonly maxRequestsPerWindow = 100; // æ¯åˆ†é’Ÿæœ€å¤š100ä¸ªè¯·æ±‚

  constructor(minInterval: number = 100) {
    this.minInterval = minInterval;
  }

  /**
   * æ‰§è¡Œè¢«é™æµçš„å‡½æ•°
   */
  async execute<T>(fn: () => Promise<T>): Promise<T> {
    return new Promise((resolve, reject) => {
      this.queue.push({ fn, resolve, reject });

      if (!this.processing) {
        this.processQueue();
      }
    });
  }

  /**
   * å¤„ç†é˜Ÿåˆ—
   */
  private async processQueue() {
    if (this.processing) return;
    this.processing = true;

    while (this.queue.length > 0) {
      // æ£€æŸ¥çª—å£æ˜¯å¦éœ€è¦é‡ç½®
      const now = Date.now();
      if (now - this.windowStart >= this.windowSize) {
        this.requestCount = 0;
        this.windowStart = now;
      }

      // å¦‚æœè¾¾åˆ°çª—å£é™åˆ¶ï¼Œç­‰å¾…åˆ°ä¸‹ä¸€ä¸ªçª—å£
      if (this.requestCount >= this.maxRequestsPerWindow) {
        const waitTime = this.windowSize - (now - this.windowStart);
        await new Promise(r => setTimeout(r, waitTime));
        this.requestCount = 0;
        this.windowStart = Date.now();
      }

      // ç¡®ä¿æœ€å°é—´éš”
      const elapsed = Date.now() - this.lastRequestTime;
      if (elapsed < this.minInterval) {
        await new Promise(r => setTimeout(r, this.minInterval - elapsed));
      }

      const task = this.queue.shift();
      if (task) {
        try {
          const result = await task.fn();
          this.lastRequestTime = Date.now();
          this.requestCount++;
          task.resolve(result);
        } catch (error) {
          task.reject(error);
        }
      }
    }

    this.processing = false;
  }

  /**
   * è·å–å½“å‰é˜Ÿåˆ—é•¿åº¦
   */
  getQueueLength(): number {
    return this.queue.length;
  }
}

// åˆ›å»ºå…¨å±€å®ä¾‹
export const apiRateLimiter = new RateLimiter(150); // æ¯ä¸ªè¯·æ±‚æœ€å°‘é—´éš”150ms
```

##### æ–¹æ¡ˆ2: æ·»åŠ æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶

åœ¨ `api/src/utils/api-retry.ts` ä¸­å®ç°ï¼š

```typescript
/**
 * å¸¦æŒ‡æ•°é€€é¿çš„APIé‡è¯•
 */
export async function retryWithBackoff<T>(
  fn: () => Promise<T>,
  maxRetries: number = 3,
  initialDelay: number = 1000
): Promise<T> {
  let lastError: any;

  for (let attempt = 0; attempt <= maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error: any) {
      lastError = error;

      // å¦‚æœæ˜¯429é”™è¯¯ï¼Œä½¿ç”¨æŒ‡æ•°é€€é¿
      if (error.message?.includes('429002') || error.message?.includes('api request is limited')) {
        if (attempt < maxRetries) {
          const delay = initialDelay * Math.pow(2, attempt);
          console.log(`APIé™æµï¼Œç­‰å¾… ${delay}ms åé‡è¯• (å°è¯• ${attempt + 1}/${maxRetries})`);
          await new Promise(resolve => setTimeout(resolve, delay));
          continue;
        }
      }

      // å…¶ä»–é”™è¯¯ç›´æ¥æŠ›å‡º
      throw error;
    }
  }

  throw lastError;
}
```

##### æ–¹æ¡ˆ3: ä½¿ç”¨ä½ç½®

åœ¨ `strategy-scheduler.service.ts` ä¸­åº”ç”¨ï¼š

```typescript
import { apiRateLimiter } from '../utils/rate-limiter';
import { retryWithBackoff } from '../utils/api-retry';

// åŸä»£ç ï¼š
// const order = await tradeClient.replaceOrder(...)

// ä¿®æ”¹åï¼š
const order = await apiRateLimiter.execute(() =>
  retryWithBackoff(() => tradeClient.replaceOrder(...))
);
```

#### å»ºè®®
**åŒæ—¶å®æ–½æ–¹æ¡ˆ1å’Œæ–¹æ¡ˆ2**ï¼Œæ—¢é™åˆ¶å¹¶å‘è¯·æ±‚é€Ÿç‡ï¼Œåˆæä¾›é‡è¯•æœºåˆ¶ã€‚

---

### 3. è®¢å•æäº¤å¤±è´¥ - Decimalç±»å‹é”™è¯¯ (1,308æ¬¡)

#### é”™è¯¯ä¿¡æ¯
```
ç­–ç•¥ 5 æäº¤è®¢å•å¤±è´¥ (RBLX.US/PLTR.US/ROKU.USç­‰):
openapi error: code=602001: invalid SubmitRequest.SubmittedQuantity:
value does not match regex pattern "^([1-9]\\d*(\\.\\d+)?)$"
```

#### ä»£ç ä½ç½®
**æ–‡ä»¶**: `api/src/services/basic-execution.service.ts`
**è¡Œå·**: 778

#### ä»£ç ç‰‡æ®µ
```typescript:api/src/services/basic-execution.service.ts
// ç¬¬690-778è¡Œ
async submitOrder(
  strategyId: number,
  symbol: string,
  intent: TradingIntent
): Promise<ExecutionResult> {
  try {
    // ... å‰ç½®éªŒè¯ä»£ç  ...

    // æ„å»ºè®¢å•æäº¤å‚æ•°
    const orderParams = {
      symbol,
      orderType: OrderType.LO, // é™ä»·å•
      side: intent.side === 'BUY' ? OrderSide.Buy : OrderSide.Sell,
      submittedQuantity: intent.quantity,  // â† é—®é¢˜ç‚¹ï¼šå¯èƒ½æ˜¯è´Ÿæ•°æˆ–éæ ‡å‡†æ ¼å¼
      timeInForce: TimeInForceType.Day,
      submittedPrice: intent.price,
      outsideRth: OutsideRTH.AnyTime,
      remark: `ç­–ç•¥${strategyId}`,
    };

    // æäº¤è®¢å•
    const result = await tradeClient.submitOrder(orderParams);
    // ...
  } catch (error: any) {
    logger.error(`ç­–ç•¥ ${strategyId} æäº¤è®¢å•å¤±è´¥ (${symbol}):`, error);  // â† ç¬¬778è¡Œ
    // ...
  }
}
```

#### é—®é¢˜åˆ†æ
- **æ ¹æœ¬åŸå› **:
  1. å–ç©ºè®¢å•çš„ `quantity` æ˜¯è´Ÿæ•°ï¼ˆå¦‚ -100ï¼‰
  2. LongPort SDKè¦æ±‚ `submittedQuantity` å¿…é¡»æ˜¯æ­£æ•´æ•°æˆ–æ­£å°æ•°
  3. æ²¡æœ‰å¯¹å–ç©ºè®¢å•çš„æ•°é‡è¿›è¡Œç»å¯¹å€¼è½¬æ¢

- **å½±å“æ ‡çš„**:
  - BMNR.US: 331æ¬¡
  - HOOD.US: 296æ¬¡
  - ACHR.US: 292æ¬¡
  - PLTR.US: 206æ¬¡
  - SHOP.US: 201æ¬¡
  - ROKU.US: 182æ¬¡
  - RBLX.US: 123æ¬¡

#### ä¿®å¤æ–¹æ¡ˆ

##### æ–¹æ¡ˆ1: ä¿®æ­£è®¢å•æ•°é‡å¤„ç†ï¼ˆæ¨èï¼‰

åœ¨ `basic-execution.service.ts` ä¸­ä¿®æ”¹ï¼š

```typescript
// ä¿®æ”¹å‰ï¼š
const orderParams = {
  symbol,
  orderType: OrderType.LO,
  side: intent.side === 'BUY' ? OrderSide.Buy : OrderSide.Sell,
  submittedQuantity: intent.quantity,  // â† å¯èƒ½æ˜¯è´Ÿæ•°
  timeInForce: TimeInForceType.Day,
  submittedPrice: intent.price,
  outsideRth: OutsideRTH.AnyTime,
  remark: `ç­–ç•¥${strategyId}`,
};

// ä¿®æ”¹åï¼š
const orderParams = {
  symbol,
  orderType: OrderType.LO,
  side: intent.side === 'BUY' ? OrderSide.Buy : OrderSide.Sell,
  submittedQuantity: Math.abs(intent.quantity).toString(),  // â† è½¬ä¸ºæ­£æ•°å¹¶è½¬å­—ç¬¦ä¸²
  timeInForce: TimeInForceType.Day,
  submittedPrice: new Decimal(intent.price.toString()),  // â† ä½¿ç”¨Decimalç±»å‹
  outsideRth: OutsideRTH.AnyTime,
  remark: `ç­–ç•¥${strategyId}`,
};
```

##### æ–¹æ¡ˆ2: åœ¨ç­–ç•¥å±‚é¢è§„èŒƒåŒ–æ•°é‡

åœ¨ `strategy-scheduler.service.ts` ä¸­ï¼Œç”ŸæˆTradingIntentæ—¶ç¡®ä¿æ•°é‡ä¸ºæ­£ï¼š

```typescript
// å–ç©ºæ„å›¾
const shortIntent: TradingIntent = {
  action: 'SHORT',
  side: 'SELL',
  symbol: symbol,
  quantity: Math.abs(calculatedQuantity),  // â† ç¡®ä¿æ˜¯æ­£æ•°
  price: shortPrice,
  reason: shortReason,
  timestamp: new Date(),
};
```

#### å»ºè®®
**åŒæ—¶å®æ–½æ–¹æ¡ˆ1å’Œæ–¹æ¡ˆ2**ï¼Œåœ¨å¤šä¸ªå±‚é¢ç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡®ã€‚

---

### 4. è®¢å•ä»·æ ¼æ›´æ–°å¤±è´¥ - Decimalç±»å‹é”™è¯¯ (1,040æ¬¡)

#### é”™è¯¯ä¿¡æ¯
```
ç­–ç•¥ 5 æ ‡çš„ AMD.US è®¢å•ä»·æ ¼æ›´æ–°å¤±è´¥ (1200364832893718528):
Unwrap value [longport_nodejs::decimal::Decimal] from class failed on ReplaceOrderOptions.quantity
```

#### ä»£ç ä½ç½®
**æ–‡ä»¶**: `api/src/services/strategy-scheduler.service.ts`
**è¡Œå·**: 853

#### ä»£ç ç‰‡æ®µ
```typescript:api/src/services/strategy-scheduler.service.ts
// ç¬¬800-860è¡Œ
private async trackUnfilledOrders(strategyId: number): Promise<void> {
  try {
    // ... æŸ¥è¯¢æœªæˆäº¤è®¢å• ...

    for (const order of pendingOrders) {
      try {
        // è·å–æœ€æ–°ä»·æ ¼
        const latestPrice = await this.getLatestPrice(order.symbol);

        if (latestPrice) {
          // æ›´æ–°è®¢å•ä»·æ ¼
          await tradeClient.replaceOrder({
            orderId: order.order_id,
            quantity: order.quantity,  // â† é—®é¢˜ç‚¹ï¼šå¯èƒ½ä¸æ˜¯Decimalç±»å‹
            price: latestPrice,        // â† é—®é¢˜ç‚¹ï¼šå¯èƒ½ä¸æ˜¯Decimalç±»å‹
          });

          logger.log(`è®¢å• ${order.order_id} ä»·æ ¼å·²æ›´æ–°: ${order.price} â†’ ${latestPrice}`);
        }
      } catch (error: any) {
        const errorMessage = error.message || String(error);

        if (errorCode === '602012' || errorMessage.includes('602012') || errorMessage.includes('Order amendment is not supported')) {
          continue;
        }

        logger.warn(`ç­–ç•¥ ${strategyId} æ ‡çš„ ${order.symbol} è®¢å•ä»·æ ¼æ›´æ–°å¤±è´¥ (${order.order_id}): ${errorMessage}`);  // â† ç¬¬853è¡Œ
      }
    }
  } catch (error: any) {
    logger.error(`è¿½è¸ªæœªæˆäº¤è®¢å•å¤±è´¥ (ç­–ç•¥ ${strategyId}):`, error);
  }
}
```

#### é—®é¢˜åˆ†æ
- **æ ¹æœ¬åŸå› **:
  1. `replaceOrder` APIè¦æ±‚ `quantity` å’Œ `price` å¿…é¡»æ˜¯ `Decimal` ç±»å‹
  2. ä»æ•°æ®åº“è¯»å–çš„å€¼æ˜¯ `number` æˆ– `string` ç±»å‹
  3. æ²¡æœ‰è¿›è¡Œç±»å‹è½¬æ¢

- **å½±å“è®¢å•**:
  - AMD.US: 770æ¬¡
  - RBLX.US: 246æ¬¡
  - å…¶ä»–å¤šä¸ªæ ‡çš„

#### ä¿®å¤æ–¹æ¡ˆ

##### æ–¹æ¡ˆ1: æ­£ç¡®ä½¿ç”¨Decimalç±»å‹ï¼ˆæ¨èï¼‰

```typescript
import { Decimal } from '../config/longport';

// ä¿®æ”¹å‰ï¼š
await tradeClient.replaceOrder({
  orderId: order.order_id,
  quantity: order.quantity,
  price: latestPrice,
});

// ä¿®æ”¹åï¼š
await tradeClient.replaceOrder({
  orderId: order.order_id,
  quantity: new Decimal(order.quantity.toString()),  // â† è½¬ä¸ºDecimal
  price: new Decimal(latestPrice.toString()),        // â† è½¬ä¸ºDecimal
});
```

##### æ–¹æ¡ˆ2: åˆ›å»ºç±»å‹è½¬æ¢è¾…åŠ©å‡½æ•°

åœ¨ `api/src/utils/decimal-helper.ts` ä¸­ï¼š

```typescript
import { Decimal } from '../config/longport';

/**
 * å®‰å…¨åœ°è½¬æ¢ä¸ºDecimalç±»å‹
 */
export function toDecimal(value: number | string | Decimal): Decimal {
  if (value instanceof Decimal) {
    return value;
  }
  return new Decimal(value.toString());
}

/**
 * è½¬æ¢è®¢å•å‚æ•°ä¸ºæ­£ç¡®çš„ç±»å‹
 */
export function normalizeOrderParams(params: {
  quantity?: number | string | Decimal;
  price?: number | string | Decimal;
  [key: string]: any;
}) {
  const normalized: any = { ...params };

  if (params.quantity !== undefined) {
    normalized.quantity = toDecimal(params.quantity);
  }

  if (params.price !== undefined) {
    normalized.price = toDecimal(params.price);
  }

  return normalized;
}
```

ä½¿ç”¨ï¼š

```typescript
import { normalizeOrderParams } from '../utils/decimal-helper';

await tradeClient.replaceOrder(normalizeOrderParams({
  orderId: order.order_id,
  quantity: order.quantity,
  price: latestPrice,
}));
```

#### å»ºè®®
**æ¨èæ–¹æ¡ˆ2**ï¼Œç»Ÿä¸€å¤„ç†æ‰€æœ‰Decimalç±»å‹è½¬æ¢ï¼Œé¿å…é—æ¼ã€‚

---

## âš ï¸ ä¸­ä¼˜å…ˆçº§è­¦å‘Š

### 5. è®¢å•-ä¿¡å·å…³è”å¤±è´¥ (1,867æ¬¡)

#### è­¦å‘Šä¿¡æ¯
```
æœªæ‰¾åˆ°è®¢å• 1200364596456599552 å…³è”çš„ä¿¡å·
(strategy_id=5, symbol=SHOP.US, side=SELL, signalType=SELL)
```

#### ä»£ç ä½ç½®
**æ–‡ä»¶**: `api/src/services/basic-execution.service.ts` æˆ–è®¢å•å…³è”é€»è¾‘
**é¢„è®¡ä½ç½®**: è®¢å•æ¨é€å¤„ç†æˆ–ä¿¡å·åŒ¹é…é€»è¾‘

#### é—®é¢˜åˆ†æ
- **æ ¹æœ¬åŸå› **:
  1. è®¢å•åˆ›å»ºå’Œä¿¡å·åˆ›å»ºçš„æ—¶é—´çª—å£ä¸åŒ¹é…
  2. æ—¶é—´çª—å£è¿‡çª„ï¼ˆå½“å‰1å°æ—¶ï¼‰
  3. è®¢å•å¯èƒ½åœ¨ä¿¡å·åˆ›å»ºä¹‹å‰å°±å·²å­˜åœ¨ï¼ˆå†å²è®¢å•ï¼‰

- **å½±å“è®¢å•**:
  - TEM.US: 780æ¬¡
  - SHOP.US: 774æ¬¡
  - RBLX.US: 309æ¬¡

#### ä¿®å¤æ–¹æ¡ˆ

éœ€è¦æŸ¥æ‰¾è®¢å•-ä¿¡å·å…³è”çš„å…·ä½“ä»£ç ä½ç½®ï¼Œå¯èƒ½åœ¨ï¼š
1. `api/src/services/trade-push.service.ts`
2. `api/src/services/signal-order-matching.service.ts`
3. `strategy-scheduler.service.ts` ä¸­çš„è®¢å•ç›‘æ§é€»è¾‘

##### ä¸´æ—¶æ–¹æ¡ˆ: æ‰©å¤§æ—¶é—´çª—å£

```typescript
// ä»1å°æ—¶æ‰©å¤§åˆ°2å°æ—¶
const timeWindow = {
  start: new Date(signal.created_at.getTime() - 2 * 60 * 60 * 1000),
  end: new Date(signal.created_at.getTime() + 2 * 60 * 60 * 1000)
};
```

##### é•¿æœŸæ–¹æ¡ˆ: æ”¹è¿›åŒ¹é…ç®—æ³•

1. å¢åŠ è®¢å•IDå’Œä¿¡å·IDçš„ç›´æ¥å…³è”å­—æ®µ
2. åœ¨åˆ›å»ºè®¢å•æ—¶ç«‹å³å…³è”ä¿¡å·ID
3. ä½¿ç”¨äº‹åŠ¡ç¡®ä¿è®¢å•å’Œä¿¡å·åŸå­æ€§åˆ›å»º

---

### 6. æŒä»“çŠ¶æ€ä½†contextä¸ºç©º (390æ¬¡)

#### è­¦å‘Šä¿¡æ¯
```
ç­–ç•¥ 5 æ ‡çš„ CRCL.US: æŒä»“çŠ¶æ€ä½†contextä¸ºç©º
ç­–ç•¥ 5 æ ‡çš„ CRCL.US: å–ç©ºæŒä»“çŠ¶æ€ä½†contextä¸ºç©º
```

#### ä»£ç ä½ç½®
**æ–‡ä»¶**: `api/src/services/strategy-scheduler.service.ts`
**è¡Œå·**: 1629, 1951

#### ä»£ç ç‰‡æ®µ
```typescript:api/src/services/strategy-scheduler.service.ts
// ç¬¬1624-1632è¡Œ
try {
  const contextData = instanceResult.rows[0].context;
  if (!contextData) {
    logger.warn(`ç­–ç•¥ ${strategyId} æ ‡çš„ ${symbol}: æŒä»“çŠ¶æ€ä½†contextä¸ºç©º`);  // â† ç¬¬1629è¡Œ
    return { actionTaken: false };
  } else {
    context = typeof contextData === 'string'
      ? JSON.parse(contextData)
      : contextData;
  }
}

// ç¬¬1946-1956è¡Œï¼ˆå–ç©ºæŒä»“ï¼‰
let context: any = {};
try {
  const contextData = instanceResult.rows[0].context;
  if (!contextData) {
    logger.warn(`ç­–ç•¥ ${strategyId} æ ‡çš„ ${symbol}: å–ç©ºæŒä»“çŠ¶æ€ä½†contextä¸ºç©º`);  // â† ç¬¬1951è¡Œ
    return { actionTaken: false };
  } else {
    context = typeof contextData === 'string'
      ? JSON.parse(contextData)
      : contextData;
  }
}
```

#### é—®é¢˜åˆ†æ
- **æ ¹æœ¬åŸå› **:
  1. æ•°æ®åº“ä¸­çš„ `strategy_instances` è¡¨çš„ `context` å­—æ®µä¸ºNULL
  2. å¯èƒ½æ˜¯å†å²æ•°æ®è¿ç§»ä¸å®Œæ•´
  3. å¯èƒ½æ˜¯ä¹‹å‰çš„ä»£ç æ²¡æœ‰æ­£ç¡®ä¿å­˜context

- **å½±å“æ ‡çš„**: CRCL.US (390æ¬¡ï¼Œæ­£å¥½å¯¹åº”390æ¬¡ç­–ç•¥æ‰§è¡Œ)

#### ä¿®å¤æ–¹æ¡ˆ

##### æ–¹æ¡ˆ1: ä¿®å¤å†å²æ•°æ®

```sql
-- æŸ¥è¯¢contextä¸ºç©ºçš„æŒä»“è®°å½•
SELECT id, strategy_id, symbol, status
FROM strategy_instances
WHERE status IN ('HOLDING', 'SHORT_HOLDING')
  AND (context IS NULL OR context = '{}');

-- å¦‚æœæ— æ³•æ¢å¤contextï¼Œå°†çŠ¶æ€é‡ç½®ä¸ºIDLE
UPDATE strategy_instances
SET status = 'IDLE',
    context = NULL,
    updated_at = NOW()
WHERE status IN ('HOLDING', 'SHORT_HOLDING')
  AND (context IS NULL OR context = '{}');
```

##### æ–¹æ¡ˆ2: ä»£ç ä¸­å°è¯•æ¢å¤context

```typescript
if (!contextData) {
  // å°è¯•ä»è®¢å•å†å²æ¢å¤context
  const orderHistory = await pool.query(
    `SELECT * FROM orders
     WHERE strategy_id = $1 AND symbol = $2
     ORDER BY created_at DESC LIMIT 1`,
    [strategyId, symbol]
  );

  if (orderHistory.rows.length > 0) {
    const order = orderHistory.rows[0];
    context = {
      entryPrice: order.price,
      entryTime: order.created_at,
      quantity: order.quantity,
      orderId: order.id,
    };

    // æ›´æ–°æ•°æ®åº“
    await pool.query(
      `UPDATE strategy_instances
       SET context = $1
       WHERE strategy_id = $2 AND symbol = $3`,
      [JSON.stringify(context), strategyId, symbol]
    );

    logger.log(`å·²ä»è®¢å•å†å²æ¢å¤ ${symbol} çš„context`);
  } else {
    logger.warn(`ç­–ç•¥ ${strategyId} æ ‡çš„ ${symbol}: æŒä»“çŠ¶æ€ä½†contextä¸ºç©ºï¼Œä¸”æ— è®¢å•å†å²`);
    // é‡ç½®çŠ¶æ€
    await pool.query(
      `UPDATE strategy_instances
       SET status = 'IDLE', context = NULL
       WHERE strategy_id = $1 AND symbol = $2`,
      [strategyId, symbol]
    );
    return { actionTaken: false };
  }
}
```

#### å»ºè®®
**å…ˆæ‰§è¡Œæ–¹æ¡ˆ1æ¸…ç†æ•°æ®ï¼Œå†å®æ–½æ–¹æ¡ˆ2ä½œä¸ºä¿æŠ¤æœºåˆ¶**ã€‚

---

### 7. å–ç©ºéªŒè¯å¤±è´¥ - APIé™æµ (467æ¬¡)

#### è­¦å‘Šä¿¡æ¯
```
[ç­–ç•¥æ‰§è¡Œ] ç­–ç•¥ 5 æ ‡çš„ TSLA.US: å–ç©ºéªŒè¯å¤±è´¥ -
Failed to check short selling permission: openapi error: code=429002
```

#### ä»£ç ä½ç½®
**æ–‡ä»¶**: `api/src/services/short-position-validation.service.ts`
**æ¶‰åŠçš„APIè°ƒç”¨**:
- `tradeClient.marginRatio()`
- å–ç©ºæƒé™æ£€æŸ¥ç›¸å…³API

#### é—®é¢˜åˆ†æ
- **æ ¹æœ¬åŸå› **: ä¸é—®é¢˜2ç›¸åŒï¼ŒAPIé™æµ
- **å½±å“æ ‡çš„**:
  - TSLA.US: 146æ¬¡
  - ROKU.US: 118æ¬¡
  - PLTR.US: 118æ¬¡
  - SHOP.US: 85æ¬¡

#### ä¿®å¤æ–¹æ¡ˆ
å‚è€ƒé—®é¢˜2çš„ä¿®å¤æ–¹æ¡ˆï¼Œåœ¨ `short-position-validation.service.ts` ä¸­ä¹Ÿåº”ç”¨é€Ÿç‡é™åˆ¶å™¨ã€‚

---

## ğŸ“‹ ä¿®å¤ä¼˜å…ˆçº§å»ºè®®

### ç«‹å³ä¿®å¤ï¼ˆæœ¬å‘¨å†…å®Œæˆï¼‰

1. âœ… **åˆ›å»ºæ•°æ®åº“è¡¨** (é—®é¢˜1)
   - å½±å“: 780æ¬¡é”™è¯¯
   - éš¾åº¦: ä½
   - æ—¶é—´: 10åˆ†é’Ÿ

2. âœ… **ä¿®å¤Decimalç±»å‹è½¬æ¢** (é—®é¢˜3, 4)
   - å½±å“: 2,348æ¬¡é”™è¯¯
   - éš¾åº¦: ä¸­
   - æ—¶é—´: 2å°æ—¶

### çŸ­æœŸä¼˜åŒ–ï¼ˆä¸¤å‘¨å†…å®Œæˆï¼‰

3. â³ **å®ç°APIé€Ÿç‡é™åˆ¶** (é—®é¢˜2, 7)
   - å½±å“: 1,555æ¬¡é”™è¯¯/è­¦å‘Š
   - éš¾åº¦: ä¸­
   - æ—¶é—´: 4å°æ—¶

4. â³ **æ¸…ç†æŒä»“contextæ•°æ®** (é—®é¢˜6)
   - å½±å“: 390æ¬¡è­¦å‘Š
   - éš¾åº¦: ä½
   - æ—¶é—´: 1å°æ—¶

### é•¿æœŸæ”¹è¿›ï¼ˆä¸€ä¸ªæœˆå†…å®Œæˆï¼‰

5. â³ **ä¼˜åŒ–è®¢å•-ä¿¡å·å…³è”** (é—®é¢˜5)
   - å½±å“: 1,867æ¬¡è­¦å‘Š
   - éš¾åº¦: é«˜
   - æ—¶é—´: 1å¤©

6. â³ **æ·»åŠ ç›‘æ§å’Œå‘Šè­¦**
   - å®æ—¶ç›‘æ§é”™è¯¯ç‡
   - è‡ªåŠ¨å‘Šè­¦æœºåˆ¶
   - æ€§èƒ½æŒ‡æ ‡è¿½è¸ª

---

## ğŸ”§ é€šç”¨ä¿®å¤å»ºè®®

### 1. ä»£ç è´¨é‡æå‡

#### ç±»å‹å®‰å…¨
```typescript
// åœ¨æ‰€æœ‰APIè°ƒç”¨å¤„æ·»åŠ ç±»å‹æ£€æŸ¥
import { Decimal } from '../config/longport';

function ensureDecimal(value: any): Decimal {
  if (value instanceof Decimal) return value;
  if (typeof value === 'number' || typeof value === 'string') {
    return new Decimal(value.toString());
  }
  throw new Error(`æ— æ³•è½¬æ¢ä¸ºDecimal: ${value}`);
}
```

#### é”™è¯¯å¤„ç†
```typescript
// ç»Ÿä¸€çš„é”™è¯¯å¤„ç†åŒ…è£…å™¨
async function safeExecute<T>(
  fn: () => Promise<T>,
  context: string
): Promise<T | null> {
  try {
    return await fn();
  } catch (error: any) {
    logger.error(`${context} æ‰§è¡Œå¤±è´¥:`, error);

    // æ ¹æ®é”™è¯¯ç±»å‹å†³å®šæ˜¯å¦é‡è¯•
    if (error.message?.includes('429002')) {
      // APIé™æµï¼Œç­‰å¾…åé‡è¯•
      await new Promise(r => setTimeout(r, 2000));
      return await fn();
    }

    return null;
  }
}
```

### 2. æ•°æ®åº“è¿ç§»ç®¡ç†

**å·²åˆ›å»ºè¿ç§»è„šæœ¬**: `api/migrations/011_create_validation_failure_logs.sql`

è¯¥è„šæœ¬å·²æŒ‰ç…§é¡¹ç›®è¿ç§»è§„èŒƒåˆ›å»ºï¼ŒåŒ…å«ï¼š
- å®Œæ•´çš„è¡¨ç»“æ„å®šä¹‰
- å¤–é”®çº¦æŸ
- æ€§èƒ½ä¼˜åŒ–ç´¢å¼•
- ä¸­è‹±æ–‡æ³¨é‡Š
- è‡ªåŠ¨éªŒè¯é€»è¾‘

æ‰§è¡Œæ–¹å¼ï¼š

```bash
# æ–¹å¼1: ä½¿ç”¨psqlå‘½ä»¤è¡Œå·¥å…·
psql -U postgres -d trading_db -f api/migrations/011_create_validation_failure_logs.sql

# æ–¹å¼2: ä½¿ç”¨pgAdminæˆ–å…¶ä»–æ•°æ®åº“ç®¡ç†å·¥å…·
# ç›´æ¥æ‰“å¼€æ–‡ä»¶å¹¶æ‰§è¡ŒSQLè„šæœ¬
```

å¦‚æœéœ€è¦å›æ»šï¼ˆåˆ é™¤è¡¨ï¼‰ï¼š

```sql
-- è°¨æ…æ“ä½œï¼šåˆ é™¤validation_failure_logsè¡¨
DROP TABLE IF EXISTS validation_failure_logs CASCADE;
```

### 3. æ—¥å¿—å¢å¼º

åœ¨å…³é”®ä½ç½®æ·»åŠ æ›´è¯¦ç»†çš„æ—¥å¿—ï¼š

```typescript
// åœ¨è®¢å•æäº¤å‰è®°å½•è¯¦ç»†å‚æ•°
logger.debug(`å‡†å¤‡æäº¤è®¢å•:`, {
  strategyId,
  symbol,
  side: intent.side,
  quantity: intent.quantity,
  quantityType: typeof intent.quantity,
  price: intent.price,
  priceType: typeof intent.price,
});

// åœ¨APIè°ƒç”¨åè®°å½•å“åº”
logger.debug(`APIè°ƒç”¨æˆåŠŸ:`, {
  api: 'submitOrder',
  symbol,
  orderId: result.orderId,
  responseTime: Date.now() - startTime,
});
```

### 4. å•å…ƒæµ‹è¯•

ä¸ºå…³é”®å‡½æ•°æ·»åŠ æµ‹è¯•ï¼š

```typescript
// api/src/__tests__/decimal-conversion.test.ts
import { toDecimal } from '../utils/decimal-helper';
import { Decimal } from '../config/longport';

describe('Decimalè½¬æ¢æµ‹è¯•', () => {
  test('åº”è¯¥æ­£ç¡®è½¬æ¢numberä¸ºDecimal', () => {
    const result = toDecimal(100);
    expect(result).toBeInstanceOf(Decimal);
    expect(result.toString()).toBe('100');
  });

  test('åº”è¯¥æ­£ç¡®è½¬æ¢stringä¸ºDecimal', () => {
    const result = toDecimal('99.99');
    expect(result).toBeInstanceOf(Decimal);
    expect(result.toString()).toBe('99.99');
  });

  test('åº”è¯¥æ­£ç¡®å¤„ç†è´Ÿæ•°', () => {
    const result = toDecimal(-50);
    expect(result.toString()).toBe('-50');
  });

  test('å·²ç»æ˜¯Decimalåˆ™ç›´æ¥è¿”å›', () => {
    const original = new Decimal('123.45');
    const result = toDecimal(original);
    expect(result).toBe(original);
  });
});
```

---

## ğŸ“Š é¢„æœŸæ”¹è¿›æ•ˆæœ

### ä¿®å¤å‰
- é”™è¯¯ç‡: 15.2% (3,737/24,630)
- è­¦å‘Šç‡: 18.2% (4,479/24,630)
- ä¸»è¦é—®é¢˜: æ•°æ®åº“é”™è¯¯ã€APIé™æµã€ç±»å‹è½¬æ¢

### ä¿®å¤åé¢„æœŸ
- é”™è¯¯ç‡: <5% (ç›®æ ‡ <1,232)
- è­¦å‘Šç‡: <10% (ç›®æ ‡ <2,463)
- ä¸»è¦æ”¹è¿›:
  - æ•°æ®åº“é”™è¯¯: 780 â†’ 0 âœ…
  - Decimalé”™è¯¯: 2,348 â†’ 0 âœ…
  - APIé™æµ: 1,088 â†’ <100 ğŸ“‰
  - è®¢å•å…³è”: 1,867 â†’ <500 ğŸ“‰

---

## ğŸ“ æ‰§è¡Œæ¸…å•

### ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®åº“ä¿®å¤
- [x] æ‰§è¡Œè¿ç§»è„šæœ¬ `api/migrations/011_create_validation_failure_logs.sql`ï¼ˆâœ… å·²æ‰§è¡Œï¼‰
  ```bash
  psql -U postgres -d trading_db -f api/migrations/011_create_validation_failure_logs.sql
  ```
- [ ] éªŒè¯è¡¨åˆ›å»ºæˆåŠŸ
  ```sql
  SELECT table_name FROM information_schema.tables WHERE table_name = 'validation_failure_logs';
  \d validation_failure_logs
  ```
- [ ] æµ‹è¯•æ—¥å¿—è®°å½•åŠŸèƒ½
  ```sql
  INSERT INTO validation_failure_logs (strategy_id, symbol, failure_type, reason, timestamp)
  VALUES (1, 'TEST.US', 'TEST', 'Test record', NOW());
  DELETE FROM validation_failure_logs WHERE failure_type = 'TEST';
  ```

### ç¬¬äºŒé˜¶æ®µï¼šä»£ç ä¿®å¤
- [x] ä¿®å¤ `basic-execution.service.ts`ï¼šå–ç©ºè®¢å• `submittedQuantity` ç»Ÿä¸€è½¬æ­£æ•° + ä½¿ç”¨ `Decimal`
- [x] ä¿®å¤ `strategy-scheduler.service.ts`ï¼š`replaceOrder.quantity` ä½¿ç”¨ `Decimal`ï¼Œå–ç©ºéªŒè¯å¤±è´¥å†™å…¥ `validation_failure_logs`
- [x] ä¿®å¤ `api/src/routes/orders.ts`ï¼š`replaceOrder.quantity` ä½¿ç”¨ `Decimal`ï¼ˆé¿å… unwrap æŠ¥é”™ï¼‰
- [x] ä¿®å¤ `strategy-scheduler.service.ts`ï¼šæŒä»“/å–ç©ºæŒä»“ `context` ä¸ºç©ºæ—¶å°è¯•ä»è®¢å•å†å²æ¢å¤ï¼ˆæ— å†å²åˆ™é‡ç½®ä¸º `IDLE`ï¼‰
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆå»ºè®®è¦†ç›–ï¼šå–ç©ºä¸‹å•æ•°é‡ã€replaceOrderå‚æ•°ã€contextæ¢å¤ï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼šé€Ÿç‡é™åˆ¶
- [x] åˆ›å»º `api/src/utils/longport-rate-limiter.ts`ï¼ˆè½»é‡é˜Ÿåˆ—é™æµ + 429002æŒ‡æ•°é€€é¿é‡è¯•ï¼‰
- [x] åœ¨å…³é”®LongPortè°ƒç”¨å¤„åº”ç”¨ï¼ˆ`submitOrder` / `replaceOrder` / `accountBalance`ï¼‰
- [ ] è¯„ä¼°å¹¶æ‰©å±•åˆ°å…¶å®ƒé«˜é¢‘è°ƒç”¨ç‚¹ï¼ˆå¦‚ quote/staticInfo/todayOrders ç­‰ï¼‰
- [ ] æµ‹è¯•é™æµæ•ˆæœï¼ˆè§‚å¯Ÿ 429002 æ—¥å¿—æ˜¯å¦æ˜¾è‘—ä¸‹é™ï¼‰

### ç¬¬å››é˜¶æ®µï¼šæ•°æ®æ¸…ç†
- [ ] æ¸…ç†æŒä»“contextä¸ºç©ºçš„è®°å½•
- [ ] æ·»åŠ contextæ¢å¤é€»è¾‘
- [ ] éªŒè¯æ•°æ®ä¸€è‡´æ€§

### ç¬¬äº”é˜¶æ®µï¼šæµ‹è¯•éªŒè¯
- [ ] è¿è¡Œå•å…ƒæµ‹è¯•
- [ ] è¿è¡Œé›†æˆæµ‹è¯•
- [ ] ç›‘æ§çº¿ä¸Šæ—¥å¿—
- [ ] éªŒè¯é”™è¯¯ç‡ä¸‹é™

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ—¥å¿—åˆ†æçœ‹æ¿](./logs-analysis-dashboard.html)
- [æ—¥å¿—åˆ†æä½¿ç”¨è¯´æ˜](./260127-æ—¥å¿—åˆ†æçœ‹æ¿ä½¿ç”¨è¯´æ˜.md)
- [å·¥å…·ä½¿ç”¨æŒ‡å—](./scripts/LOG_ANALYSIS_README.md)
- [å–ç©ºåŠŸèƒ½ä»£ç å®¡æŸ¥](./docs/review/251225-å–ç©ºåŠŸèƒ½ä»£ç å®¡æŸ¥æŠ¥å‘Š.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**ç”Ÿæˆæ—¶é—´**: 2026-01-27
**åŸºäºæ—¥å¿—**: logs-2026-01-27.json (24,630æ¡)
**ç»´æŠ¤è€…**: Trading System Team
